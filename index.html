<!DOCTYPE html>
<html lang="en" data-theme="ultraglow">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>PSS – Welcome</title>
    <link href="./src/css/index.css" rel="stylesheet" />
  </head>

  <body class="min-h-screen bg-base-100 flex items-center justify-center p-4">
    <div
      class="w-full max-w-5xl bg-base-200/40 backdrop-blur-xl rounded-3xl shadow-xl border border-base-300 overflow-hidden grid grid-cols-1 md:grid-cols-2">
      <!-- LEFT: WELCOME -->
      <div
        class="p-10 flex flex-col justify-center items-start text-left border-r border-base-300 bg-gradient-to-br from-base-200/40 to-base-300/40 [@media(max-width:450px)]:items-center [@media(max-width:450px)]:text-center">
        <h1
          class="text-4xl md:text-5xl font-bold mb-6 animate__fadeIn animate__animated">
          Welcome to <span class="text-primary">PSS</span>
        </h1>
        <p class="text-base-content/70 text-lg leading-relaxed">
          Privy Star School learning hub — where brilliance meets technology.
          Get started with your personalized quiz experience.
        </p>
      </div>

      <!-- RIGHT: SIGN-IN + SIGN-UP -->
      <div
        class="p-10 flex flex-col justify-center animate__animated animate__fadeInRight">
        <div class="tabs tabs-boxed mb-6">
          <a class="tab tab-active" id="signin-tab">Sign In</a>
          <a class="tab" id="signup-tab">Sign Up</a>
        </div>

        <!-- SIGN-IN FORM -->
        <form id="signin-form" class="space-y-4">
          <input
            type="email"
            placeholder="Email Address"
            class="input input-bordered w-full"
            autocomplete="email"
            required />

          <input
            type="password"
            placeholder="Password"
            class="input input-bordered w-full"
            autocomplete="current-password"
            required />
          <button class="btn btn-primary w-full">Sign In</button>
        </form>

        <!-- SIGN-UP FORM -->
        <form id="signup-form" class="space-y-4 hidden">
          <input
            type="text"
            placeholder="Full Name"
            class="input input-bordered w-full"
            autocomplete="name"
            required />

          <input
            type="email"
            placeholder="Email Address"
            class="input input-bordered w-full"
            autocomplete="email"
            required />

          <input
            type="password"
            placeholder="Password"
            class="input input-bordered w-full"
            autocomplete="new-password"
            required />

          <button class="btn btn-accent w-full">Create Account</button>
        </form>
      </div>
    </div>

    <script>
      const signinTab = document.getElementById("signin-tab");
      const signupTab = document.getElementById("signup-tab");
      const signinForm = document.getElementById("signin-form");
      const signupForm = document.getElementById("signup-form");

      // ==========================
      // TAB SWITCHING
      // ==========================
      signinTab.addEventListener("click", () => {
        signinTab.classList.add("tab-active");
        signupTab.classList.remove("tab-active");
        signinForm.classList.remove("hidden");
        signupForm.classList.add("hidden");
      });

      signupTab.addEventListener("click", () => {
        signupTab.classList.add("tab-active");
        signinTab.classList.remove("tab-active");
        signupForm.classList.remove("hidden");
        signinForm.classList.add("hidden");
      });

      // ==========================
      // SIGN UP FUNCTION
      // ==========================
      signupForm.addEventListener("submit", (e) => {
        e.preventDefault();

        const name = signupForm.querySelector("input[type='text']").value;
        const email = signupForm.querySelector("input[type='email']").value;
        const password = signupForm.querySelector(
          "input[type='password']"
        ).value;

        if (!name || !email || !password) {
          alert("All fields are required");
          return;
        }

        const users = JSON.parse(localStorage.getItem("pss_users")) || [];

        const userExists = users.find((user) => user.email === email);
        if (userExists) {
          alert("Account already exists. Please sign in.");
          return;
        }

        users.push({ name, email, password });
        localStorage.setItem("pss_users", JSON.stringify(users));

        alert("Account created successfully!");

        signupForm.reset();

        // Auto switch to sign-in
        signinTab.click();
      });

      // ==========================
      // SIGN IN FUNCTION
      // ==========================
      signinForm.addEventListener("submit", (e) => {
        e.preventDefault();

        const email = signinForm.querySelector("input[type='email']").value;
        const password = signinForm.querySelector(
          "input[type='password']"
        ).value;

        const users = JSON.parse(localStorage.getItem("pss_users")) || [];

        const validUser = users.find(
          (user) => user.email === email && user.password === password
        );

        if (!validUser) {
          alert("Invalid email or password");
          return;
        }

        // Save logged-in user
        localStorage.setItem("pss_logged_in", JSON.stringify(validUser));

        // Redirect to categories page
        window.location.href = "./categories.html";
      });

      const user = JSON.parse(localStorage.getItem("pss_logged_in"));

      if (!user) {
        window.location.href = "./index.html";
      }
    </script>
  </body>
</html>
